# Development HTTPS Certificates

This directory contains locally-trusted SSL/TLS certificates for local HTTPS development using [mkcert](https://github.com/FiloSottile/mkcert).

## Prerequisites

Install mkcert:

```bash
# macOS
brew install mkcert

# Linux
brew install mkcert
# or
sudo apt install mkcert  # Debian/Ubuntu
sudo yum install mkcert  # CentOS/RHEL

# Windows
choco install mkcert
# or
scoop install mkcert
```

## Initial Setup (One-time)

Install the local CA in your system trust store:

```bash
mkcert -install
```

This creates and installs a local Certificate Authority that your system and browsers will trust automatically.

## Generating Certificates

To generate or regenerate certificates for localhost:

```bash
cd apps/backend/certs
mkcert -key-file key.pem -cert-file cert.pem localhost 127.0.0.1 ::1
```

This creates:

- `cert.pem` - Public certificate (automatically trusted by your browsers)
- `key.pem` - Private key

### Alternative: Multiple Domains

If you need additional domains or IP addresses:

```bash
mkcert -key-file key.pem -cert-file cert.pem \
  localhost \
  127.0.0.1 \
  ::1 \
  *.localhost \
  local.dev \
  0.0.0.0
```

## Browser Trust

**No manual browser configuration needed!** Because mkcert installs a local CA in your system trust store, all major browsers (Chrome, Firefox, Safari, Edge) automatically trust certificates generated by mkcert.

## Security Note

⚠️ **These are development-only certificates.** Never use them in production.

- mkcert creates a local Certificate Authority (CA) unique to your machine
- Certificates are automatically trusted only on your development machine
- The CA is not shared or uploaded anywhere
- Safe for local development, but provides no security guarantees outside your machine

## Files

- `cert.pem` - Public certificate (generated by mkcert)
- `key.pem` - Private key (keep secure, never commit to version control)
- `openssl.cnf` - Legacy OpenSSL config (no longer needed with mkcert)

## Troubleshooting

### Certificates not trusted after generation

Run the CA installation again:

```bash
mkcert -install
```

### Check certificate details

```bash
# View certificate info
openssl x509 -in cert.pem -text -noout

# Check expiry
openssl x509 -in cert.pem -noout -dates
```

### Certificate not loading in application

- Ensure `USE_HTTPS=true` in `.env`
- Check file permissions: `chmod 644 cert.pem && chmod 600 key.pem`
- Verify files exist: `ls -la cert.pem key.pem`
- Restart the development server

### HTTPS still shows warnings

1. Verify mkcert CA is installed: `mkcert -CAROOT`
2. Reinstall CA: `mkcert -install`
3. Regenerate certificates
4. Clear browser cache and restart browser

## Uninstalling

To remove the local CA from your system:

```bash
mkcert -uninstall
```
